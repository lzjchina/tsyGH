(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b87d8ec0"],{"3d60":function(e,t,o){},"5c1d":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"phoneLive"},[n("div",{staticClass:"id_test_video_box"},[n("video",{ref:"videoPlayer",attrs:{src:"",id:"id_test_video",autoplay:"",unmuted:"",playsinline:"",controls:""}})]),n("div",{staticClass:"tipsArea"},[n("p",{staticClass:"ptext"},[e._v(e._s(e.liveMsg.liveTitle))]),n("div",{staticClass:"number"},[n("img",{attrs:{src:o("c3e5"),alt:""}}),n("span",[e._v(e._s(e.roomNumber)+"人正在参与")])])]),n("div",{staticClass:"describe"},[e._m(0),n("div",{staticClass:"profile",domProps:{innerHTML:e._s(e.liveMsg.profile)}})])])},i=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("h1",{staticClass:"desHead"},[o("span",[e._v("课程介绍")])])}],s=(o("99af"),o("4de4"),o("2319")),c={data:function(){return{playerOptions:{autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"application/x-mpegURL",src:""},{type:"application/x-mpegURL",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试"},liveMsg:{},roomNumber:0,timer:null,roomNum:this.$route.query.room,rtcUrl:"",baseURL:"172.16.8.18:30506"}},mounted:function(){var e=this;this.setRem(),window.addEventListener("beforeunload",(function(){e.setCurrentFontSize()})),this.getRoomNum(),this.wsLink()},beforeDestroy:function(){this.setCurrentFontSize()},methods:{setRem:function(){var e=window.innerWidth/750;document.getElementsByTagName("html")[0].style["font-size"]=100*e+"px"},setCurrentFontSize:function(){document.getElementsByTagName("html")[0].style["font-size"]="14px"},wsLink:function(){var e=this,t=this.$route.query.room;this.WS=new WebSocket("ws://".concat(this.baseURL,"/web/live/").concat(t,"/audience-count")),this.WS.onopen=function(){console.log("连接")},this.WS.onmessage=function(t){var o=JSON.parse(t.data);e.roomNumber=o.data},this.WS.onclose=function(){console.log("关闭")}},getRoomNum:function(){var e=this.$route.query.room;this.getLiveDetails(e)},getLiveDetails:function(e){var t=this;Object(s["b"])(e).then((function(e){if(200==e.code){t.liveMsg=e.data;var o=e.data.playList,n=o.filter((function(e){return 3==e.type})),i=o.filter((function(e){return 1==e.type})),s=o.filter((function(e){return 4==e.type}));t.playerOptions.sources[0].src=n[0].playUrl,t.playerOptions.sources[1].src=i[0].playUrl,t.rtcUrl=s[0].playUrl,t.loadScript((function(){return t.initVideo("id_test_video")}),{id:"tcPlayerScriptId",url:"https://jssdk-70126.njc.vod.tencent-cloud.com/WebRTCAPI.min.js"})}}))},loadScript:function(e,t){if(document.getElementById(t.id))e();else{var o=document.createElement("script");o.async=!0,o.src=t.url,o.id=t.id,o.onload=function(){e()},document.body.appendChild(o)}},initVideo:function(){var e=this.$refs.videoPlayer;TXWebRTCAPI.pullStream(this.rtcUrl,e.id),TXWebRTCAPI.on("onAddStream",this.onAddStream),TXWebRTCAPI.on("onRemoveStream",this.onRemoveStream),TXWebRTCAPI.on("onEvent",this.onEvent)},onAddStream:function(e){console.log(e);var t=document.getElementById("id_test_video");t.srcObject=e.stream,t.autoplay=!0,t.playsinline=!0;var o=t.play();o&&o.then((function(){console.log("play ok!")})).catch((function(){console.log("play failed!")}))},onRemoveStream:function(e){console.log("停了"),console.log("[client_demo]onRemoveStream, ".concat(JSON.stringify(e),", code: ").concat(e.code)),console.log("停了")},onEvent:function(e){console.log("[client_demo]onEvent, e:",e);var t=e.type,o=e.content;if("client_detect"==t){console.log("是否支持webrtc"),console.log(o.errcode),console.log("是否支持webrtc");o.errcode}else if("session_id"==t){var n=o.sessionid;console.log("----------session_id-------------"),console.log("[client_demo]onEvent, notify session_id: ".concat(n)),console.log("----------session_id-------------")}else if("stream_state"==t){var i=o.code,s=o.streamurl;console.log("----------codecode-------------"),console.log(i),console.log("----------codecode-------------"),10014==i&&console.log("[client_demo]onEvent, notify streamUrl: "+s+" invalid")}}}},r=c,l=(o("7c77"),o("2877")),a=Object(l["a"])(r,n,i,!1,null,null,null);t["default"]=a.exports},"7c77":function(e,t,o){"use strict";var n=o("3d60"),i=o.n(n);i.a},c3e5:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAASCAYAAABB7B6eAAACfklEQVQ4T5WUPYgTQRTH/282WxiiqHiiHoincqKFYqWdRosjuzOeKMZG5FBsbOz0Cu88PQuxsbIInIogFgEJm50NOUE5rLQ4xc5Cw9mIiJUfOTDuPplgINnbJJfp5n393pv33hBix/f9NICrRHQOwA4AS8z8BMBdpVQ9bt/vTu0GJjgRvQRwKMHxDTMfGxTSAdBa3wIw1SOrWSnldL+s2/UdgCAIPjLzrh4BalLKpr5QKNjDw8OTRHSBmbcAeM/M00qp510BWus/AOwegFBKmTJ63/cfE9H5mG1IRCdd19UtebwHNSIa6QFYklKO+L5/gIjeAejwN37M/EEptTcREATBLDNf7wZg5ttKqSmt9UUAc93sbNvOjI2N/Tb6FVME4AURHY47M/NrAMfNFGmtTwF4lgRg5uVMJrMum83+XQEwgmKxuCadTk8CMHuw3ewBgKf1ev1OPp9fNjae5621LOsTgKGEROaUUpcSn2iQ8fN9/ygRmSo2tvm9CsNQjo+P/+wLqFQqQ2EY7mfm3UKITQBMyV+FECXHcX6YAFrrDVEUnRZCbCait47jzBMR99qD0SiKJojoBIB9bT2KADwiolnXdT8PUmmzydVqdWuj0bhHRGcAiFiAX5Zlnc3lcpWW3PO8g0YGIAtgFID5v74w8yIzayIqtr4U8jxvj2VZCwDMNsaPydyRUs7/b+62VCpVYGbZp4rvAK5JKR9SEAQLzHyki0NVSpkzulKptN627UUAO1f7RFEUXSGttWme1WWmm4tldOVy+bIQ4v5qgxs7Zv5mAB1d75gAohnXdW8aWRAEN5h5ZhBAc9G01mZhEsumNkC5XJ4QQjxIGIJezNo/9fb4rZPsrCIAAAAASUVORK5CYII="}}]);